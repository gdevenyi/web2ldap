<!--#set var="web2ldap_subtitle" value="Installing on openSUSE Linux" -->
<!--#set var="web2ldap_pagedescription" value="A brief description on how to install it on openSUSE 13.1 or newer" -->
<!--#include file="ssi/head.html" -->
<!--#include file="ssi/navigation.html" -->

<h2>Notes in advance</h2>
<ul>
  <li>
    This simple install receipt requires that the machine has Internet (proxy)
    access to load packages from the
    <a href="http://download.opensuse.org">openSUSE download repository</a>.
  </li>
  <li>
    If you run with additional security packages enabled (e.g. <em>AppArmor</em> or
    <em>SELinux</em>) additional actions are likely needed to enable network and
    file access.
  </li>
  <li>
    Your mileage may slightly vary! So watch out for error messages and
    <a href="feedback.html">report back</a>.
  </li>
</ul>

<h2>openSUSE packages</h2>

<p>
  Some required modules are not available as main openSUSE packages or the
  packages are too old (especially <var>python-ldap</var>).
  So we have to add the separate openSUSE repository
  <a href="http://download.opensuse.org/repositories/devel:/languages:/python/">
  devel:languages:python</a>.
</p>

<pre>
export SUSE_RELEASE="$(grep VERSION /etc/SuSE-release|cut -d ' ' -f3)"
zypper addrepo http://download.opensuse.org/repositories/devel:/languages:/python/openSUSE_${SUSE_RELEASE}/devel:languages:python.repo
</pre>

<p>Install required packages:</p>

<pre>
zypper install python python-xml python-pyweblib python-ldap python-pyasn1 python-pyasn1-modules python-pyweblib python-netaddr
</pre>

<p>Install optional but useful modules:</p>

<pre>
zypper install python-pydns python-Pillow python-pyexcelerator python-m2crypto python-paramiko
</pre>

<h2>web2ldap application</h2>

<h3>Unpack, move and check</h3>

<p>
Grab <a href ="download.html">web2ldap source</a>, extract anywhere and it
move to <em>/opt/web2ldap</em>:
</p>

<pre>
wget https://www.web2ldap.de/download/web2ldap-<!--#include file="ssi/release.shtml" -->.tar.gz
tar xzf web2ldap-<!--#include file="ssi/release.shtml" -->.tar.gz --no-same-owner
mv web2ldap-<!--#include file="ssi/release.shtml" --> /opt/web2ldap
</pre>

<p>
Check whether all software is installed - watch out for errors and warnings:
</p>

<pre>
python /opt/web2ldap/sbin/checkinst.py
</pre>

<p>
  Relax the IP restrictions by editing
  <a href="web2ldapcnf_standalone.html#bind_address">bind_address</a> and
  <a href="web2ldapcnf_standalone.html#access_allowed">access_allowed</a>
  in file
  /opt/web2ldap/etc/web2ldap/web2ldapcnf/standalone.py
  if you want to make web2ldap accessible by others over network.
</p>

<p>
  For testing start built-in HTTP server listening on all interfaces:
</p>

<pre>
python /opt/web2ldap/sbin/web2ldap.py -l 0.0.0.0:1760 -d off
</pre>

<p>
  Access it with your browser:
</p>

<code>
http://your-server-hostname-or-address-here:1760/web2ldap
</code>

<h3>Integrate with Apache/mod_wsgi</h3>

<p>Install packages for running as WSGI server:</p>

<pre>
zypper install apache2-mod_wsgi
</pre>

<p>
  Enable WSGI in Apache by adding <em>wsgi</em> to
  <var>APACHE_MODULES</var> in file <em>/etc/sysconfig/apache2</em>.
</p>

<p>
  Copy sample web2ldap's configuration and edit to suit your needs
  (e.g. allowed IP addresses):
</p>

<p>
  Enable <var>mod_wsgi</var> by editing <var>APACHE_MODULES</var>
  in file /etc/sysconfig/apache2.
</p>

<pre>
cp /opt/web2ldap/etc/httpd/sample-mod_wsgi-2.4.conf /etc/apache2/conf.d/web2ldap-wsgi.conf
$EDITOR /etc/sysconfig/apache2
$EDITOR /etc/apache2/conf.d/web2ldap-wsgi.conf
rcapache2 restart
</pre>

<p>
  Access it with your browser (takes a bit longer the first time):
</p>

<code>
http://your-server-hostname-or-address-here/web2ldap
</code>

<p>
  or if your server already is configured with SSL/TLS enabled:
</p>

<code>
https://your-server-hostname-or-address-here/web2ldap
</code>

<!--#include file="ssi/footer.html" -->
