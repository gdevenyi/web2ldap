<!--#set var="web2ldap_subtitle" value="Installing on Debian" -->
<!--#set var="web2ldap_pagedescription" value="A brief description on how to install it on Debian Jessie or later" -->
<!--#include file="ssi/head.html" -->
<!--#include file="ssi/navigation.html" -->

<h2>Notes in advance</h2>
<ul>
  <li>
    Internet (proxy) access is needed to access the
    <a href="https://pypi.python.org">PyPI repository</a>.
  </li>
  <li>
    Your mileage may slightly vary! So watch out for error messages and
    <a href="feedback.html">report back</a>.
  </li>
</ul>

<h2>Debian packages</h2>

<p>
  These packages are required for compiling/installing python-ldap
  via Python's <a href="https://pypi.python.org/pypi/setuptools">
  setuptools</a> (see <em>easy_install</em> below):
</p>

<pre>
apt-get install build-essential libsasl2-dev libldap-dev python-virtualenv python-dev python-setuptools python-netaddr
</pre>

<h3>Optional but useful</h3>

<p>For automagically converting <var>jpegPhoto</var> attribute values:</p>
<pre>
apt-get install python-imaging python-m2crypto python-dns python-excelerator python-paramiko
</pre>

<h2>web2ldap application (unpack, move and check)</h2>

<p>
Grab <a href ="download.html">web2ldap source</a>, extract anywhere and it
move to <em>/opt/web2ldap</em>:
</p>

<pre>
wget https://www.web2ldap.de/download/web2ldap-<!--#include file="ssi/release.shtml" -->.tar.gz
tar xzf web2ldap-<!--#include file="ssi/release.shtml" -->.tar.gz --no-same-owner
mv web2ldap-<!--#include file="ssi/release.shtml" --> /opt/web2ldap
</pre>

<p>Initialize Python virtual environment:</p>

<pre>
python2.7 -m virtualenv -v --system-site-packages /opt/web2ldap
</pre>

<h2>PyPI source packages</h2>
<p>
  Some required modules are not available as Debian packages or the
  Debian packages are too old (especially <var>python-ldap</var>).<br>
  So we proceed here with Python setup tools which automagically downloads
  and build the latest releases from <a href="https://pypi.python.org">PyPI repository</a>.
</p>

<p>
  Set proxy settings if needed:
</p>

<pre>
export http_proxy="http://proxy.example.com:8080"
export https_proxy="http://proxy.example.com:8080"
export ftp_proxy="http://proxy.example.com:8080"
</pre>

<p>
  Install needed modules:
</p>

<pre>
/opt/web2ldap/bin/pip2.7 install python-ldap pyweblib pyasn1 pyasn1_modules
</pre>

<h2>web2ldap application (continued)</h2>

<p>
Check whether all software is installed - watch out for errors and warnings:
</p>

<pre>
/opt/web2ldap/bin/python /opt/web2ldap/sbin/checkinst.py
</pre>

<p>
  Relax the IP restrictions by editing
  <a href="web2ldapcnf_standalone.html#bind_address">bind_address</a> and
  <a href="web2ldapcnf_standalone.html#access_allowed">access_allowed</a>
  in file
  /opt/web2ldap/etc/web2ldap/web2ldapcnf/standalone.py
  if you want to make web2ldap accessible by others over network.
</p>

<p>
  For testing start built-in HTTP server listening on all interfaces:
</p>

<pre>
/opt/web2ldap/bin/python /opt/web2ldap/sbin/web2ldap.py -l 0.0.0.0:1760 -d off
</pre>

<p>
  Access it with your browser:
</p>

<code>
http://your-server-hostname-or-address-here:1760/web2ldap
</code>

<h3>Integrate with Apache/mod_fcgid</h3>

<p>Install packages for running as FastCGI server:</p>

<pre>
apt-get install apache2-mpm-prefork libapache2-mod-fcgid
wget -O /opt/web2ldap/lib/python2.7/site-packages/fcgi.py http://alldunn.com/python/fcgi.py
</pre>

<p>
  Copy sample web2ldap's configuration and edit to suit your needs
  (e.g. allowed IP addresses):
</p>

<pre>
cp /opt/web2ldap/fcgi/web2ldap.py /opt/web2ldap/fcgi/web2ldap.py.orig
sed 's|/usr/bin/python|/opt/web2ldap/bin/python|' /opt/web2ldap/fcgi/web2ldap.py.orig > /opt/web2ldap/fcgi/web2ldap.py
cp /opt/web2ldap/etc/httpd/sample-mod_fcgid-2.4.conf /etc/apache2/conf-available/web2ldap-fcgid.conf
$EDITOR /etc/apache2/conf-available/web2ldap-fcgid.conf
a2enconf  web2ldap-fcgid.conf
service apache2 reload
</pre>

<p>
  Access it with your browser (takes a bit longer the first time):
</p>

<code>
http://your-server-hostname-or-address-here/web2ldap
</code>

<p>
  or if your server already is configured with SSL/TLS enabled:
</p>

<code>
https://your-server-hostname-or-address-here/web2ldap
</code>

<!--#include file="ssi/footer.html" -->
